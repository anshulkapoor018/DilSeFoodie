{"ast":null,"code":"var _jsxFileName = \"/Users/arun/Documents/Capstone/Capstone-Studio-Project/src/components/edit-user-profile.component.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar dummyProfilePic = \"https://res.cloudinary.com/helpinghands101/image/upload/v1615598217/user_mcyfxd.png\";\nvar userObject = JSON.parse(window.sessionStorage.getItem(\"userDetails\")); // This makes sure that a user is authenticated before seeing this page\n// function CheckSession(){\n//     if (window.sessionStorage.getItem('isLoggedIn') === null || window.sessionStorage.getItem('isLoggedIn') === 'false'){\n//         window.location = \"/user\"\n//     }\n// }\n\nfunction update(value) {\n  let prevData = JSON.parse(sessionStorage.getItem('userDetails'));\n  Object.keys(value).forEach(function (val, key) {\n    prevData[val] = value[val];\n  });\n  sessionStorage.setItem('userDetails', JSON.stringify(prevData));\n}\n\nclass EditUserProfile extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: null,\n      profilePicture: userObject['profilePicture'],\n      firstName: userObject['firstName'],\n      lastName: userObject['lastName'],\n      email: userObject['email'],\n      city: userObject['city'],\n      state: userObject['state'],\n      age: userObject['age'],\n      password: userObject['password']\n    }; // this.state.profilePicture = this.state.profilePicture.bind(this);\n\n    this.onChangeFirstName = this.onChangeFirstName.bind(this);\n    this.onChangeLastName = this.onChangeLastName.bind(this);\n    this.onChangeEmail = this.onChangeEmail.bind(this);\n    this.onChangePassword = this.onChangePassword.bind(this);\n    this.onChangeCity = this.onChangeCity.bind(this);\n    this.onChangeState = this.onChangeState.bind(this);\n    this.onChangeAge = this.onChangeAge.bind(this);\n    this.submitregister = this.submitregister.bind(this);\n    this.onImageChange = this.onImageChange.bind(this);\n  }\n\n  onImageChange(e) {\n    this.setState({\n      file: e.target.files[0],\n      profilePicture: URL.createObjectURL(e.target.files[0])\n    });\n  }\n\n  onChangeFirstName(e) {\n    const target = e.target;\n    const value = target.value; // const name = target.name; \n\n    this.setState({\n      firstName: value\n    });\n  }\n\n  onChangeLastName(e) {\n    const target = e.target;\n    const value = target.value; // const name = target.name; \n\n    this.setState({\n      lastName: value\n    });\n  }\n\n  onChangeEmail(e) {\n    const target = e.target;\n    const value = target.value; // const name = target.name; \n\n    this.setState({\n      email: value\n    });\n  }\n\n  onChangePassword(e) {\n    const target = e.target;\n    const value = target.value; // const name = target.name; \n\n    this.setState({\n      password: value\n    });\n  }\n\n  onChangeCity(e) {\n    const target = e.target;\n    const value = target.value; // const name = target.name; \n\n    this.setState({\n      city: value\n    });\n  }\n\n  onChangeState(e) {\n    const target = e.target;\n    const value = target.value; // const name = target.name; \n\n    this.setState({\n      state: value\n    });\n  }\n\n  onChangeAge(e) {\n    const target = e.target;\n    const value = target.value; // const name = target.name; \n\n    this.setState({\n      age: value\n    });\n  }\n\n  submitregister(e) {\n    e.preventDefault();\n    var self = this;\n    const user = {\n      firstName: this.state.firstName,\n      lastName: this.state.lastName,\n      email: this.state.email,\n      password: this.state.password,\n      profilePicture: this.state.profilePicture,\n      city: this.state.city,\n      state: this.state.state,\n      age: this.state.age\n    };\n    axios.post('http://localhost:5000/user/update_profile', user).then(function (response) {\n      console.log(response.data.userDetails);\n      self.setState({\n        profilePicture: response.data.userDetails.profilePicture,\n        firstName: response.data.userDetails.firstName,\n        lastName: response.data.userDetails.lastName\n      });\n\n      if (response.data.redirect === '/profile') {\n        window.location.href = \"/profile\";\n      }\n    });\n    window.location.reload();\n  }\n\n  uploadProfilePic(e) {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('img', this.state.file);\n    const config = {\n      headers: {\n        'content-type': 'multipart/form-data'\n      }\n    };\n    axios.post(\"http://localhost:5000/user/upload\", formData, config).then(response => {\n      console.log(response.data.url);\n      update({\n        profilePicture: response.data.url\n      });\n      this.setState({\n        profilePicture: response.data.url\n      });\n    }).catch(error => {});\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Edit User Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-wide\",\n        id: \"left\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: this.state.profilePicture,\n          alt: \"Avatar\",\n          className: \"profilePic\",\n          name: \"profilePicture\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"img\",\n          name: \"img\",\n          accept: \"image/*\",\n          className: \"w-100\",\n          onChange: this.onImageChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Upload Photo\",\n          onClick: this.uploadProfilePic.bind(this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-wide\",\n        id: \"right\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          submitregister: this.submitregister,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"firstName\",\n            children: \"First Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"firstName\",\n            id: \"firstName\",\n            type: \"text\",\n            value: this.state.firstName,\n            onChange: this.onChangeFirstName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"lastName\",\n            children: \"Last Name:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"lastName\",\n            id: \"lastName\",\n            type: \"text\",\n            value: this.state.lastName,\n            onChange: this.onChangeLastName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"Email\",\n            children: \"Email:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"Email\",\n            id: \"Email\",\n            type: \"text\",\n            value: this.state.email,\n            onChange: this.onChangeEmail,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"City\",\n            children: \"City:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"City\",\n            id: \"City\",\n            type: \"text\",\n            value: this.state.city,\n            onChange: this.onChangeCity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"State\",\n            children: \"State:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"State\",\n            id: \"State\",\n            type: \"text\",\n            value: this.state.state,\n            onChange: this.onChangeState\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"Age\",\n            children: \"Age:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"Age\",\n            id: \"Age\",\n            type: \"text\",\n            value: this.state.age,\n            onChange: this.onChangeAge\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"Password\",\n            children: \"Password:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"Password\",\n            id: \"Password\",\n            type: \"password\",\n            value: this.state.password,\n            onChange: this.onChangePassword\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"btn\",\n            type: \"submit\",\n            className: \"login-btn\",\n            onClick: this.submitregister.bind(this),\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default EditUserProfile;","map":{"version":3,"sources":["/Users/arun/Documents/Capstone/Capstone-Studio-Project/src/components/edit-user-profile.component.js"],"names":["React","axios","dummyProfilePic","userObject","JSON","parse","window","sessionStorage","getItem","update","value","prevData","Object","keys","forEach","val","key","setItem","stringify","EditUserProfile","Component","constructor","props","state","file","profilePicture","firstName","lastName","email","city","age","password","onChangeFirstName","bind","onChangeLastName","onChangeEmail","onChangePassword","onChangeCity","onChangeState","onChangeAge","submitregister","onImageChange","e","setState","target","files","URL","createObjectURL","preventDefault","self","user","post","then","response","console","log","data","userDetails","redirect","location","href","reload","uploadProfilePic","formData","FormData","append","config","headers","url","catch","error","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nvar dummyProfilePic = \"https://res.cloudinary.com/helpinghands101/image/upload/v1615598217/user_mcyfxd.png\"\nvar userObject = JSON.parse(window.sessionStorage.getItem(\"userDetails\"));\n\n// This makes sure that a user is authenticated before seeing this page\n// function CheckSession(){\n//     if (window.sessionStorage.getItem('isLoggedIn') === null || window.sessionStorage.getItem('isLoggedIn') === 'false'){\n//         window.location = \"/user\"\n//     }\n// }\nfunction update(value){\n    let prevData = JSON.parse(sessionStorage.getItem('userDetails'));\n    Object.keys(value).forEach(function(val, key){\n         prevData[val] = value[val];\n    })\n    sessionStorage.setItem('userDetails', JSON.stringify(prevData));\n}\n\nclass EditUserProfile extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            file: null,\n            profilePicture: userObject['profilePicture'],\n            firstName: userObject['firstName'],\n            lastName: userObject['lastName'],\n            email: userObject['email'],\n            city: userObject['city'],\n            state: userObject['state'],\n            age: userObject['age'],\n            password: userObject['password'],\n        };\n        // this.state.profilePicture = this.state.profilePicture.bind(this);\n        this.onChangeFirstName = this.onChangeFirstName.bind(this);\n        this.onChangeLastName = this.onChangeLastName.bind(this);\n        this.onChangeEmail = this.onChangeEmail.bind(this);\n        this.onChangePassword = this.onChangePassword.bind(this);\n        this.onChangeCity = this.onChangeCity.bind(this);\n        this.onChangeState = this.onChangeState.bind(this);\n        this.onChangeAge = this.onChangeAge.bind(this);\n        this.submitregister = this.submitregister.bind(this);\n        this.onImageChange = this.onImageChange.bind(this);\n    }\n  \n    onImageChange(e){\n        this.setState({\n            file: e.target.files[0],\n            profilePicture: URL.createObjectURL(e.target.files[0])\n        });\n    }\n\n    onChangeFirstName(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n          firstName: value,\n        })\n    }\n\n    onChangeLastName(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            lastName: value,\n        })\n    }\n\n    onChangeEmail(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            email: value,\n        })\n    }\n\n    onChangePassword(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            password: value,\n        })\n    }\n\n    onChangeCity(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            city: value,\n        })\n    }\n\n    onChangeState(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            state: value,\n        })\n    }\n\n    onChangeAge(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            age: value,\n        })\n    }\n\n    submitregister(e){\n        e.preventDefault();\n        var self = this;\n        const user = {\n            firstName: this.state.firstName,\n            lastName: this.state.lastName,\n            email: this.state.email,\n            password: this.state.password,\n            profilePicture: this.state.profilePicture,\n            city: this.state.city,\n            state: this.state.state,\n            age: this.state.age,\n        }\n\n        axios.post('http://localhost:5000/user/update_profile', user)\n        .then(function (response) {\n            console.log(response.data.userDetails);\n            self.setState({\n                profilePicture: response.data.userDetails.profilePicture,\n                firstName: response.data.userDetails.firstName,\n                lastName: response.data.userDetails.lastName\n            })\n            if (response.data.redirect === '/profile') {\n                window.location.href = \"/profile\"\n            }\n        })\n        window.location.reload();\n    }\n\n    uploadProfilePic(e){\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('img', this.state.file);\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        };\n        axios.post(\"http://localhost:5000/user/upload\",formData, config)\n            .then((response) => {\n                console.log(response.data.url);\n                update({profilePicture: response.data.url});\n                this.setState({profilePicture: response.data.url});\n            }).catch((error) => {\n        });\n    }\n\n    render() {\n      return (\n        <div className = \"card-center\">\n            <h2>Edit User Profile</h2>\n            <div className=\"card-wide\" id=\"left\">\n                <img src={this.state.profilePicture} alt=\"Avatar\" className = \"profilePic\" name=\"profilePicture\" />\n                <br></br>\n                <br></br>\n                <br></br>\n                <br></br>\n                <br></br>\n                <br></br>\n                <input type=\"file\" id=\"img\" name=\"img\" accept=\"image/*\" className=\"w-100\" onChange={this.onImageChange}/>\n                <input type=\"submit\" value=\"Upload Photo\" onClick={this.uploadProfilePic.bind(this)}/> \n            </div>\n            <div className=\"card-wide\" id=\"right\">\n                <form submitregister={this.submitregister}>\n                    <label htmlFor=\"firstName\">First Name:</label>\n                    <input name=\"firstName\" id=\"firstName\" type=\"text\" value={this.state.firstName} onChange={this.onChangeFirstName} />\n                    <label htmlFor=\"lastName\">Last Name:</label>\n                    <input name=\"lastName\" id=\"lastName\" type=\"text\" value={this.state.lastName} onChange={this.onChangeLastName} />\n                    <label htmlFor=\"Email\">Email:</label>\n                    <input name=\"Email\" id=\"Email\" type=\"text\" value={this.state.email} onChange={this.onChangeEmail} readOnly/>\n                    <label htmlFor=\"City\">City:</label>\n                    <input name=\"City\" id=\"City\" type=\"text\" value={this.state.city} onChange={this.onChangeCity} />\n                    <label htmlFor=\"State\">State:</label>\n                    <input name=\"State\" id=\"State\" type=\"text\" value={this.state.state} onChange={this.onChangeState} />\n                    <label htmlFor=\"Age\">Age:</label>\n                    <input name=\"Age\" id=\"Age\" type=\"text\" value={this.state.age} onChange={this.onChangeAge} />\n                    <label htmlFor=\"Password\">Password:</label>\n                    <input name=\"Password\" id=\"Password\" type=\"password\" value={this.state.password} onChange={this.onChangePassword} />\n                    <button id=\"btn\" type=\"submit\" className=\"login-btn\" onClick={this.submitregister.bind(this)}>Submit</button>\n                </form>\n            </div>\n        </div>\n      );\n    }\n}\n\n\nexport default EditUserProfile;"]},"metadata":{},"sourceType":"module"}