{"ast":null,"code":"import _classCallCheck from\"/Users/arun/Documents/Capstone/Capstone-Studio-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/arun/Documents/Capstone/Capstone-Studio-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/arun/Documents/Capstone/Capstone-Studio-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/arun/Documents/Capstone/Capstone-Studio-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/arun/Documents/Capstone/Capstone-Studio-Project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var dummyProfilePic=\"https://res.cloudinary.com/helpinghands101/image/upload/v1615598217/user_mcyfxd.png\";var userObject=JSON.parse(window.sessionStorage.getItem(\"userDetails\"));// This makes sure that a user is authenticated before seeing this page\n// function CheckSession(){\n//     if (window.sessionStorage.getItem('isLoggedIn') === null || window.sessionStorage.getItem('isLoggedIn') === 'false'){\n//         window.location = \"/user\"\n//     }\n// }\nfunction update(value){var prevData=JSON.parse(sessionStorage.getItem('userDetails'));Object.keys(value).forEach(function(val,key){prevData[val]=value[val];});sessionStorage.setItem('userDetails',JSON.stringify(prevData));}var EditUserProfile=/*#__PURE__*/function(_React$Component){_inherits(EditUserProfile,_React$Component);var _super=_createSuper(EditUserProfile);function EditUserProfile(props){var _this;_classCallCheck(this,EditUserProfile);_this=_super.call(this,props);_this.state={file:null,profilePicture:userObject['profilePicture'],firstName:userObject['firstName'],lastName:userObject['lastName'],email:userObject['email'],city:userObject['city'],state:userObject['state'],age:userObject['age'],password:userObject['password']};// this.state.profilePicture = this.state.profilePicture.bind(this);\n_this.onChangeFirstName=_this.onChangeFirstName.bind(_assertThisInitialized(_this));_this.onChangeLastName=_this.onChangeLastName.bind(_assertThisInitialized(_this));_this.onChangeEmail=_this.onChangeEmail.bind(_assertThisInitialized(_this));_this.onChangePassword=_this.onChangePassword.bind(_assertThisInitialized(_this));_this.onChangeCity=_this.onChangeCity.bind(_assertThisInitialized(_this));_this.onChangeState=_this.onChangeState.bind(_assertThisInitialized(_this));_this.onChangeAge=_this.onChangeAge.bind(_assertThisInitialized(_this));_this.submitregister=_this.submitregister.bind(_assertThisInitialized(_this));_this.onImageChange=_this.onImageChange.bind(_assertThisInitialized(_this));return _this;}_createClass(EditUserProfile,[{key:\"onImageChange\",value:function onImageChange(e){this.setState({file:e.target.files[0],profilePicture:URL.createObjectURL(e.target.files[0])});}},{key:\"onChangeFirstName\",value:function onChangeFirstName(e){var target=e.target;var value=target.value;// const name = target.name; \nthis.setState({firstName:value});}},{key:\"onChangeLastName\",value:function onChangeLastName(e){var target=e.target;var value=target.value;// const name = target.name; \nthis.setState({lastName:value});}},{key:\"onChangeEmail\",value:function onChangeEmail(e){var target=e.target;var value=target.value;// const name = target.name; \nthis.setState({email:value});}},{key:\"onChangePassword\",value:function onChangePassword(e){var target=e.target;var value=target.value;// const name = target.name; \nthis.setState({password:value});}},{key:\"onChangeCity\",value:function onChangeCity(e){var target=e.target;var value=target.value;// const name = target.name; \nthis.setState({city:value});}},{key:\"onChangeState\",value:function onChangeState(e){var target=e.target;var value=target.value;// const name = target.name; \nthis.setState({state:value});}},{key:\"onChangeAge\",value:function onChangeAge(e){var target=e.target;var value=target.value;// const name = target.name; \nthis.setState({age:value});}},{key:\"submitregister\",value:function submitregister(e){e.preventDefault();var self=this;var user={firstName:this.state.firstName,lastName:this.state.lastName,email:this.state.email,password:this.state.password,profilePicture:this.state.profilePicture,city:this.state.city,state:this.state.state,age:this.state.age};axios.post('http://localhost:5000/user/update_profile',user).then(function(response){console.log(response.data.userDetails);self.setState({profilePicture:response.data.userDetails.profilePicture,firstName:response.data.userDetails.firstName,lastName:response.data.userDetails.lastName});if(response.data.redirect==='/profile'){window.location.href=\"/profile\";}});window.location.reload();}},{key:\"uploadProfilePic\",value:function uploadProfilePic(e){var _this2=this;e.preventDefault();var formData=new FormData();formData.append('img',this.state.file);var config={headers:{'content-type':'multipart/form-data'}};axios.post(\"http://localhost:5000/user/upload\",formData,config).then(function(response){console.log(response.data.url);update({profilePicture:response.data.url});_this2.setState({profilePicture:response.data.url});}).catch(function(error){});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"card-center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit User Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-wide\",id:\"left\",children:[/*#__PURE__*/_jsx(\"img\",{src:this.state.profilePicture,alt:\"Avatar\",className:\"profilePic\",name:\"profilePicture\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"img\",name:\"img\",accept:\"image/*\",className:\"w-100\",onChange:this.onImageChange}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Upload Photo\",onClick:this.uploadProfilePic.bind(this)})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-wide\",id:\"right\",children:/*#__PURE__*/_jsxs(\"form\",{submitregister:this.submitregister,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",children:\"First Name:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"firstName\",id:\"firstName\",type:\"text\",value:this.state.firstName,onChange:this.onChangeFirstName}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",children:\"Last Name:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"lastName\",id:\"lastName\",type:\"text\",value:this.state.lastName,onChange:this.onChangeLastName}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"Email\",id:\"Email\",type:\"text\",value:this.state.email,onChange:this.onChangeEmail,readOnly:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"City\",children:\"City:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"City\",id:\"City\",type:\"text\",value:this.state.city,onChange:this.onChangeCity}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"State\",children:\"State:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"State\",id:\"State\",type:\"text\",value:this.state.state,onChange:this.onChangeState}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Age\",children:\"Age:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"Age\",id:\"Age\",type:\"text\",value:this.state.age,onChange:this.onChangeAge}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"Password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"Password\",id:\"Password\",type:\"password\",value:this.state.password,onChange:this.onChangePassword}),/*#__PURE__*/_jsx(\"button\",{id:\"btn\",type:\"submit\",className:\"login-btn\",onClick:this.submitregister.bind(this),children:\"Submit\"})]})})]});}}]);return EditUserProfile;}(React.Component);export default EditUserProfile;","map":{"version":3,"sources":["/Users/arun/Documents/Capstone/Capstone-Studio-Project/src/components/edit-user-profile.component.js"],"names":["React","axios","dummyProfilePic","userObject","JSON","parse","window","sessionStorage","getItem","update","value","prevData","Object","keys","forEach","val","key","setItem","stringify","EditUserProfile","props","state","file","profilePicture","firstName","lastName","email","city","age","password","onChangeFirstName","bind","onChangeLastName","onChangeEmail","onChangePassword","onChangeCity","onChangeState","onChangeAge","submitregister","onImageChange","e","setState","target","files","URL","createObjectURL","preventDefault","self","user","post","then","response","console","log","data","userDetails","redirect","location","href","reload","formData","FormData","append","config","headers","url","catch","error","uploadProfilePic","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nvar dummyProfilePic = \"https://res.cloudinary.com/helpinghands101/image/upload/v1615598217/user_mcyfxd.png\"\nvar userObject = JSON.parse(window.sessionStorage.getItem(\"userDetails\"));\n\n// This makes sure that a user is authenticated before seeing this page\n// function CheckSession(){\n//     if (window.sessionStorage.getItem('isLoggedIn') === null || window.sessionStorage.getItem('isLoggedIn') === 'false'){\n//         window.location = \"/user\"\n//     }\n// }\nfunction update(value){\n    let prevData = JSON.parse(sessionStorage.getItem('userDetails'));\n    Object.keys(value).forEach(function(val, key){\n         prevData[val] = value[val];\n    })\n    sessionStorage.setItem('userDetails', JSON.stringify(prevData));\n}\n\nclass EditUserProfile extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            file: null,\n            profilePicture: userObject['profilePicture'],\n            firstName: userObject['firstName'],\n            lastName: userObject['lastName'],\n            email: userObject['email'],\n            city: userObject['city'],\n            state: userObject['state'],\n            age: userObject['age'],\n            password: userObject['password'],\n        };\n        // this.state.profilePicture = this.state.profilePicture.bind(this);\n        this.onChangeFirstName = this.onChangeFirstName.bind(this);\n        this.onChangeLastName = this.onChangeLastName.bind(this);\n        this.onChangeEmail = this.onChangeEmail.bind(this);\n        this.onChangePassword = this.onChangePassword.bind(this);\n        this.onChangeCity = this.onChangeCity.bind(this);\n        this.onChangeState = this.onChangeState.bind(this);\n        this.onChangeAge = this.onChangeAge.bind(this);\n        this.submitregister = this.submitregister.bind(this);\n        this.onImageChange = this.onImageChange.bind(this);\n    }\n  \n    onImageChange(e){\n        this.setState({\n            file: e.target.files[0],\n            profilePicture: URL.createObjectURL(e.target.files[0])\n        });\n    }\n\n    onChangeFirstName(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n          firstName: value,\n        })\n    }\n\n    onChangeLastName(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            lastName: value,\n        })\n    }\n\n    onChangeEmail(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            email: value,\n        })\n    }\n\n    onChangePassword(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            password: value,\n        })\n    }\n\n    onChangeCity(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            city: value,\n        })\n    }\n\n    onChangeState(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            state: value,\n        })\n    }\n\n    onChangeAge(e){\n        const target = e.target;\n        const value = target.value;\n        // const name = target.name; \n        this.setState({\n            age: value,\n        })\n    }\n\n    submitregister(e){\n        e.preventDefault();\n        var self = this;\n        const user = {\n            firstName: this.state.firstName,\n            lastName: this.state.lastName,\n            email: this.state.email,\n            password: this.state.password,\n            profilePicture: this.state.profilePicture,\n            city: this.state.city,\n            state: this.state.state,\n            age: this.state.age,\n        }\n\n        axios.post('http://localhost:5000/user/update_profile', user)\n        .then(function (response) {\n            console.log(response.data.userDetails);\n            self.setState({\n                profilePicture: response.data.userDetails.profilePicture,\n                firstName: response.data.userDetails.firstName,\n                lastName: response.data.userDetails.lastName\n            })\n            if (response.data.redirect === '/profile') {\n                window.location.href = \"/profile\"\n            }\n        })\n        window.location.reload();\n    }\n\n    uploadProfilePic(e){\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('img', this.state.file);\n        const config = {\n            headers: {\n                'content-type': 'multipart/form-data'\n            }\n        };\n        axios.post(\"http://localhost:5000/user/upload\",formData, config)\n            .then((response) => {\n                console.log(response.data.url);\n                update({profilePicture: response.data.url});\n                this.setState({profilePicture: response.data.url});\n            }).catch((error) => {\n        });\n    }\n\n    render() {\n      return (\n        <div className = \"card-center\">\n            <h2>Edit User Profile</h2>\n            <div className=\"card-wide\" id=\"left\">\n                <img src={this.state.profilePicture} alt=\"Avatar\" className = \"profilePic\" name=\"profilePicture\" />\n                <br></br>\n                <br></br>\n                <br></br>\n                <br></br>\n                <br></br>\n                <br></br>\n                <input type=\"file\" id=\"img\" name=\"img\" accept=\"image/*\" className=\"w-100\" onChange={this.onImageChange}/>\n                <input type=\"submit\" value=\"Upload Photo\" onClick={this.uploadProfilePic.bind(this)}/> \n            </div>\n            <div className=\"card-wide\" id=\"right\">\n                <form submitregister={this.submitregister}>\n                    <label htmlFor=\"firstName\">First Name:</label>\n                    <input name=\"firstName\" id=\"firstName\" type=\"text\" value={this.state.firstName} onChange={this.onChangeFirstName} />\n                    <label htmlFor=\"lastName\">Last Name:</label>\n                    <input name=\"lastName\" id=\"lastName\" type=\"text\" value={this.state.lastName} onChange={this.onChangeLastName} />\n                    <label htmlFor=\"Email\">Email:</label>\n                    <input name=\"Email\" id=\"Email\" type=\"text\" value={this.state.email} onChange={this.onChangeEmail} readOnly/>\n                    <label htmlFor=\"City\">City:</label>\n                    <input name=\"City\" id=\"City\" type=\"text\" value={this.state.city} onChange={this.onChangeCity} />\n                    <label htmlFor=\"State\">State:</label>\n                    <input name=\"State\" id=\"State\" type=\"text\" value={this.state.state} onChange={this.onChangeState} />\n                    <label htmlFor=\"Age\">Age:</label>\n                    <input name=\"Age\" id=\"Age\" type=\"text\" value={this.state.age} onChange={this.onChangeAge} />\n                    <label htmlFor=\"Password\">Password:</label>\n                    <input name=\"Password\" id=\"Password\" type=\"password\" value={this.state.password} onChange={this.onChangePassword} />\n                    <button id=\"btn\" type=\"submit\" className=\"login-btn\" onClick={this.submitregister.bind(this)}>Submit</button>\n                </form>\n            </div>\n        </div>\n      );\n    }\n}\n\n\nexport default EditUserProfile;"]},"metadata":{},"sourceType":"module"}